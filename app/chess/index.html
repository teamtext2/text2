<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <!-- Primary Meta Tags -->
    <title>Text2 Chess Game</title>
    <meta name="title" content="Text2 Chess Game - Play Free Online Chess | AI & Multiplayer">
    <meta name="description" content="Play Text2 Chess Game online for free! Challenge AI opponents with multiple difficulty levels or play with friends. Modern, responsive chess game with beautiful animations and sound effects.">
    <meta name="keywords" content="text2 chess game, online chess, free chess game, chess AI, multiplayer chess, chess online, play chess, chess game, text2.pro chess">
    <meta name="author" content="Text2.pro">
    <meta name="robots" content="index, follow">
    <meta name="language" content="English">
    <meta name="revisit-after" content="7 days">
    <meta name="google" content="notranslate"> 

  <!-- Google tag (gtag.js) - GA4 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-ABCDEFG123"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
  
    gtag('config', 'G-6J85STMJ14');
  </script>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1722731267767270"
crossorigin="anonymous"></script>

    <!-- Canonical URL -->
    <link rel="canonical" href="https://text2.pro/chess/">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://text2.pro/chess/">
    <meta property="og:title" content="Text2 Chess Game - Play Free Online Chess | AI & Multiplayer">
    <meta property="og:description" content="Play Text2 Chess Game online for free! Challenge AI opponents with multiple difficulty levels or play with friends. Modern, responsive chess game with beautiful animations and sound effects.">
    <meta property="og:image" content="https://text2.pro/chess/chess-game-preview.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="Text2 Chess Game - Online Chess Platform">
    <meta property="og:site_name" content="Text2.pro">
    <meta property="og:locale" content="en_US">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://text2.pro/chess/">
    <meta property="twitter:title" content="Text2 Chess Game - Play Free Online Chess | AI & Multiplayer">
    <meta property="twitter:description" content="Play Text2 Chess Game online for free! Challenge AI opponents with multiple difficulty levels or play with friends. Modern, responsive chess game with beautiful animations and sound effects.">
    <meta property="twitter:image" content="https://text2.pro/chess/chess-game-preview.jpg">
    <meta property="twitter:image:alt" content="Text2 Chess Game - Online Chess Platform">
    <meta property="twitter:creator" content="@text2pro">
    <meta property="twitter:site" content="@text2pro">
    
    <!-- Additional Meta Tags -->
    <meta name="theme-color" content="#1e293b">
    <meta name="msapplication-TileColor" content="#1e293b">
    <meta name="application-name" content="Text2 Chess Game">
    <meta name="apple-mobile-web-app-title" content="Text2 Chess">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    
    <!-- Structured Data (JSON-LD) -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Text2 Chess Game",
        "alternateName": "Text2 Chess",
        "description": "Play Text2 Chess Game online for free! Challenge AI opponents with multiple difficulty levels or play with friends. Modern, responsive chess game with beautiful animations and sound effects.",
        "url": "https://text2.pro/chess/",
        "applicationCategory": "Game",
        "operatingSystem": "Web Browser",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "publisher": {
            "@type": "Organization",
            "name": "Text2.pro",
            "url": "https://text2.pro",
            "logo": {
                "@type": "ImageObject",
                "url": "https://text2.pro/favicon.ico"
            }
        },
        "creator": {
            "@type": "Organization",
            "name": "Text2.pro",
            "url": "https://text2.pro"
        },
        "screenshot": "https://text2.pro/chess/chess-game-preview.jpg",
        "featureList": [
            "Play against AI with multiple difficulty levels",
            "Multiplayer chess game",
            "Responsive design for all devices",
            "Beautiful animations and sound effects",
            "Free online chess game",
            "No registration required"
        ],
        "genre": "Strategy Game",
        "gamePlatform": "Web Browser",
        "playMode": ["SinglePlayer", "MultiPlayer"],
        "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": "4.8",
            "ratingCount": "150",
            "bestRating": "5",
            "worstRating": "1"
        }
    }
    </script>
    
    <!-- Breadcrumb Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [
            {
                "@type": "ListItem",
                "position": 1,
                "name": "Text2.pro",
                "item": "https://text2.pro"
            },
            {
                "@type": "ListItem",
                "position": 2,
                "name": "Chess Game",
                "item": "https://text2.pro/chess/"
            }
        ]
    }
    </script>

    <!-- Favicons -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Chess.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.10.3/chess.min.js"></script>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        body { 
            font-family: 'Outfit', sans-serif; 
            overscroll-behavior: none;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
            background-color: #121212;
            min-height: 100vh;
            min-height: 100dvh; /* Dynamic viewport height for mobile */
        }
        
        /* --- PIECE STYLING --- */
        .piece-svg {
            filter: drop-shadow(0 2px 1px rgba(0,0,0,0.3));
            transition: transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
            will-change: transform;
        }
        
        .square-interactive:active .piece-svg {
            transform: scale(1.15) translateY(-5px);
            filter: drop-shadow(0 8px 6px rgba(0,0,0,0.4));
            z-index: 50;
        }

        /* --- ANIMATIONS --- */
        
        /* 1. Move Animation (Pop In) */
        @keyframes popIn {
            0% { transform: scale(0.8); opacity: 0; }
            60% { transform: scale(1.1); opacity: 1; }
            100% { transform: scale(1); }
        }
        .animate-move {
            animation: popIn 0.3s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        }

        /* 2. Capture Shockwave */
        @keyframes shockwave {
            0% { transform: scale(0.5); opacity: 1; border-width: 3px; border-color: rgba(79, 195, 247, 0.8); }
            100% { transform: scale(1.8); opacity: 0; border-width: 0px; border-color: rgba(79, 195, 247, 0); }
        }
        .effect-capture {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            border-radius: 50%;
            border-style: solid;
            pointer-events: none;
            z-index: 40;
            animation: shockwave 0.4s ease-out forwards;
        }

        /* 3. Check Shake */
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            20% { transform: translateX(-2px) rotate(-2deg); }
            40% { transform: translateX(2px) rotate(2deg); }
            60% { transform: translateX(-2px) rotate(-2deg); }
            80% { transform: translateX(2px) rotate(2deg); }
        }
        .animate-check .piece-svg {
            animation: shake 0.4s ease-in-out infinite;
            filter: drop-shadow(0 0 6px rgba(79, 195, 247, 0.8));
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 3px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #242424; border-radius: 10px; }

        /* Compact layout for small screens */
        @media (max-height: 700px) {
            .compact-mode {
                padding: 0.5rem;
            }
            .compact-header {
                height: 3rem;
                padding: 0 1rem;
            }
            .compact-controls {
                padding: 1rem;
                padding-bottom: 1.5rem;
            }
            .compact-player-info {
                margin: 0.5rem 0;
            }
        }

        /* Ultra compact for very small screens */
        @media (max-height: 600px) {
            .ultra-compact {
                padding: 0.25rem;
            }
            .ultra-compact-header {
                height: 2.5rem;
                padding: 0 0.75rem;
            }
            .ultra-compact-controls {
                padding: 0.75rem;
                padding-bottom: 1rem;
            }
            .ultra-compact-player {
                margin: 0.25rem 0;
            }
        }

        /* Ensure full height usage */
        .full-height-container {
            height: 100vh;
            height: 100dvh;
            display: flex;
            flex-direction: column;
        }
    </style>
</head>
<body class="overflow-hidden text-slate-200">
    <div id="root" class="full-height-container"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- ASSETS: SVG CHESS PIECES ---
        const PieceSVG = ({ type, color }) => {
            const getPieceUrl = (t, c) => {
                const name = `${c === 'w' ? 'w' : 'b'}${t.toUpperCase()}`;
                const urls = {
                    wP: "https://upload.wikimedia.org/wikipedia/commons/4/45/Chess_plt45.svg",
                    wR: "https://upload.wikimedia.org/wikipedia/commons/7/72/Chess_rlt45.svg",
                    wN: "https://upload.wikimedia.org/wikipedia/commons/7/70/Chess_nlt45.svg",
                    wB: "https://upload.wikimedia.org/wikipedia/commons/b/b1/Chess_blt45.svg",
                    wQ: "https://upload.wikimedia.org/wikipedia/commons/1/15/Chess_qlt45.svg",
                    wK: "https://upload.wikimedia.org/wikipedia/commons/4/42/Chess_klt45.svg",
                    bP: "https://upload.wikimedia.org/wikipedia/commons/c/c7/Chess_pdt45.svg",
                    bR: "https://upload.wikimedia.org/wikipedia/commons/f/ff/Chess_rdt45.svg",
                    bN: "https://upload.wikimedia.org/wikipedia/commons/e/ef/Chess_ndt45.svg",
                    bB: "https://upload.wikimedia.org/wikipedia/commons/9/98/Chess_bdt45.svg",
                    bQ: "https://upload.wikimedia.org/wikipedia/commons/4/47/Chess_qdt45.svg",
                    bK: "https://upload.wikimedia.org/wikipedia/commons/f/f0/Chess_kdt45.svg",
                };
                return urls[name];
            };

            return (
                <img 
                    src={getPieceUrl(type, color)} 
                    className="piece-svg w-full h-full p-0.5 select-none pointer-events-none"
                    alt=""
                />
            );
        };

        // --- SOUND & HAPTICS ---
        const playSound = (type) => {
            const AudioContext = window.AudioContext || window.webkitAudioContext;
            if (!AudioContext) return;
            const ctx = new AudioContext();
            const osc = ctx.createOscillator();
            const gain = ctx.createGain();
            osc.connect(gain);
            gain.connect(ctx.destination);

            const now = ctx.currentTime;
            
            if (type === 'move') {
                osc.type = 'sine';
                osc.frequency.setValueAtTime(150, now);
                osc.frequency.exponentialRampToValueAtTime(100, now + 0.08);
                gain.gain.setValueAtTime(0.4, now);
                gain.gain.linearRampToValueAtTime(0, now + 0.08);
                osc.start(now);
                osc.stop(now + 0.08);
            } else if (type === 'capture') {
                osc.type = 'triangle';
                osc.frequency.setValueAtTime(200, now);
                osc.frequency.exponentialRampToValueAtTime(50, now + 0.15);
                gain.gain.setValueAtTime(0.6, now);
                gain.gain.exponentialRampToValueAtTime(0.01, now + 0.15);
                osc.start(now);
                osc.stop(now + 0.15);
            } else if (type === 'check') {
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(300, now);
                osc.frequency.linearRampToValueAtTime(200, now + 0.3);
                gain.gain.setValueAtTime(0.25, now);
                gain.gain.linearRampToValueAtTime(0, now + 0.3);
                osc.start(now);
                osc.stop(now + 0.3);
            }
        };

        const triggerHaptic = (style) => {
            if (navigator.vibrate) {
                if (style === 'light') navigator.vibrate(3);
                if (style === 'medium') navigator.vibrate(10);
                if (style === 'heavy') navigator.vibrate([20, 30, 20]);
            }
        };

        // --- AI ENGINE ---
        const pieceValues = { p: 10, n: 30, b: 30, r: 50, q: 90, k: 900 };
        const evaluateBoard = (game) => {
            let total = 0;
            game.board().forEach(row => {
                row.forEach(p => {
                    if (p) total += (p.color === 'w' ? 1 : -1) * pieceValues[p.type];
                });
            });
            return total;
        };
        const minimax = (game, depth, alpha, beta, isMax) => {
            if (depth === 0 || game.game_over()) return evaluateBoard(game);
            const moves = game.moves();
            if (isMax) {
                let maxEval = -9999;
                for (let i = 0; i < moves.length; i++) {
                    game.move(moves[i]);
                    const ev = minimax(game, depth - 1, alpha, beta, false);
                    game.undo();
                    maxEval = Math.max(maxEval, ev);
                    alpha = Math.max(alpha, ev);
                    if (beta <= alpha) break;
                }
                return maxEval;
            } else {
                let minEval = 9999;
                for (let i = 0; i < moves.length; i++) {
                    game.move(moves[i]);
                    const ev = minimax(game, depth - 1, alpha, beta, true);
                    game.undo();
                    minEval = Math.min(minEval, ev);
                    beta = Math.min(beta, ev);
                    if (beta <= alpha) break;
                }
                return minEval;
            }
        };
        const getBestMove = async (game, diff) => {
            const moves = game.moves();
            if (moves.length === 0) return null;
            if (diff === 'Easy') return moves[Math.floor(Math.random() * moves.length)];
            const depth = diff === 'Hard' ? 3 : 2;
            let bestMove = null;
            let bestValue = 9999;
            moves.sort(() => Math.random() - 0.5);
            for (let i = 0; i < moves.length; i++) {
                game.move(moves[i]);
                const val = minimax(game, depth - 1, -10000, 10000, true);
                game.undo();
                if (val < bestValue) {
                    bestValue = val;
                    bestMove = moves[i];
                }
            }
            return bestMove || moves[0];
        };

        // --- RESPONSIVE HOOK ---
        const useResponsive = () => {
            const [screenHeight, setScreenHeight] = useState(window.innerHeight);
            
            useEffect(() => {
                const handleResize = () => setScreenHeight(window.innerHeight);
                window.addEventListener('resize', handleResize);
                return () => window.removeEventListener('resize', handleResize);
            }, []);
            
            return {
                isCompact: screenHeight <= 700,
                isUltraCompact: screenHeight <= 600,
                screenHeight
            };
        };

        // --- APP ---
        const App = () => {
            const [game, setGame] = useState(new Chess());
            const [fen, setFen] = useState(game.fen());
            const [selectedSquare, setSelectedSquare] = useState(null);
            const [possibleMoves, setPossibleMoves] = useState([]);
            const [gameMode, setGameMode] = useState('PvAI');
            const [difficulty, setDifficulty] = useState('Medium');
            const [isAiThinking, setIsAiThinking] = useState(false);
            const [lastMoveSquares, setLastMoveSquares] = useState([]);
            const [captureEffect, setCaptureEffect] = useState(null);
            const [showModal, setShowModal] = useState(false);
            
            const { isCompact, isUltraCompact } = useResponsive();

            // Helpers
            const safeMutate = (fn) => {
                setGame(g => {
                    const next = { ...g };
                    Object.setPrototypeOf(next, Chess.prototype);
                    fn(next);
                    return next;
                });
            };

            const handleMoveResult = (move) => {
                setFen(game.fen());
                setLastMoveSquares([move.from, move.to]);
                
                if (move.captured) {
                    setCaptureEffect(move.to);
                    setTimeout(() => setCaptureEffect(null), 500);
                    playSound('capture');
                    triggerHaptic('heavy');
                } else {
                    playSound('move');
                }

                if (game.in_check()) {
                    playSound('check');
                    triggerHaptic('heavy');
                }
            };

            // AI Loop
            useEffect(() => {
                if (game.game_over() || gameMode !== 'PvAI' || game.turn() === 'w') return;
                const runAi = async () => {
                    setIsAiThinking(true);
                    await new Promise(r => setTimeout(r, 400));
                    const copy = new Chess(game.fen());
                    const move = await getBestMove(copy, difficulty);
                    if (move) {
                        safeMutate(g => {
                            const res = g.move(move);
                            if (res) handleMoveResult(res);
                        });
                    }
                    setIsAiThinking(false);
                };
                setTimeout(runAi, 10);
            }, [fen, gameMode]);

            // Interaction
            const onSquareClick = (sq) => {
                if (gameMode === 'PvAI' && game.turn() === 'b') return;
                if (game.game_over()) return;
                
                triggerHaptic('light');

                if (selectedSquare) {
                    try {
                        const move = game.move({ from: selectedSquare, to: sq, promotion: 'q' });
                        if (move) {
                            handleMoveResult(move);
                            setSelectedSquare(null);
                            setPossibleMoves([]);
                            return;
                        }
                    } catch (e) {}
                }

                const piece = game.get(sq);
                if (piece && piece.color === game.turn()) {
                    if (selectedSquare === sq) {
                        setSelectedSquare(null);
                        setPossibleMoves([]);
                    } else {
                        setSelectedSquare(sq);
                        setPossibleMoves(game.moves({ square: sq, verbose: true }).map(m => m.to));
                    }
                } else {
                    setSelectedSquare(null);
                    setPossibleMoves([]);
                }
            };

            // Render Board
            const renderBoard = () => {
                const board = game.board();
                const squares = [];
                const files = ['a','b','c','d','e','f','g','h'];
                const ranks = [8,7,6,5,4,3,2,1];

                for (let r = 0; r < 8; r++) {
                    for (let c = 0; c < 8; c++) {
                        const sq = `${files[c]}${ranks[r]}`;
                        const isLight = (r + c) % 2 === 0;
                        const piece = board[r][c];
                        const isSel = selectedSquare === sq;
                        const isPos = possibleMoves.includes(sq);
                        const isLast = lastMoveSquares.includes(sq);
                        const isCheck = piece && piece.type === 'k' && piece.color === game.turn() && game.in_check();
                        const isCaptureEffect = captureEffect === sq;

                        const bgClass = isLight ? 'bg-[#e2e8f0]' : 'bg-[#475569]';
                        
                        let overlay = '';
                        if (isSel) overlay = 'bg-yellow-400/50 mix-blend-overlay';
                        else if (isLast) overlay = 'bg-yellow-200/40 mix-blend-overlay';

                        squares.push(
                            <div 
                                key={sq} 
                                onClick={() => onSquareClick(sq)}
                                className={`relative w-full h-full flex items-center justify-center square-interactive ${bgClass}`}
                            >
                                <div className={`absolute inset-0 ${overlay}`}></div>

                                {/* Coordinates - smaller on compact */}
                                {c === 0 && <span className={`absolute top-0.5 left-0.5 ${isUltraCompact ? 'text-[8px]' : 'text-[9px]'} font-bold ${isLight ? 'text-slate-500' : 'text-slate-300'}`}>{ranks[r]}</span>}
                                {r === 7 && <span className={`absolute bottom-0 right-0.5 ${isUltraCompact ? 'text-[8px]' : 'text-[9px]'} font-bold ${isLight ? 'text-slate-500' : 'text-slate-300'}`}>{files[c]}</span>}

                                {/* Move indicators - smaller on compact */}
                                {isPos && !piece && (
                                    <div className={`${isUltraCompact ? 'w-2 h-2' : 'w-2.5 h-2.5'} rounded-full bg-slate-800/20 backdrop-blur-sm z-10`}></div>
                                )}
                                {isPos && piece && (
                                    <div className={`absolute inset-0 border-[${isUltraCompact ? '4px' : '5px'}] border-slate-900/10 rounded-full z-10`}></div>
                                )}

                                {isCaptureEffect && <div className="effect-capture"></div>}

                                {piece && (
                                    <div className={`
                                        w-full h-full ${isUltraCompact ? 'p-0.5' : 'p-1'} z-20 
                                        ${isLast ? 'animate-move' : ''} 
                                        ${isCheck ? 'animate-check' : ''}
                                    `}>
                                        <PieceSVG type={piece.type} color={piece.color} />
                                    </div>
                                )}
                            </div>
                        );
                    }
                }
                return squares;
            };

            // Dynamic classes based on screen size
            const headerClass = isUltraCompact ? 'ultra-compact-header' : isCompact ? 'compact-header' : 'h-14';
            const mainClass = isUltraCompact ? 'ultra-compact' : isCompact ? 'compact-mode' : 'p-4';
            const controlsClass = isUltraCompact ? 'ultra-compact-controls' : isCompact ? 'compact-controls' : 'p-6 pb-8';
            const playerInfoClass = isUltraCompact ? 'ultra-compact-player' : isCompact ? 'compact-player-info' : 'mb-4 mt-4';

            return (
                <div className="full-height-container bg-slate-950 text-slate-200 relative font-sans">
                    {/* Background */}
                    <div className="absolute inset-0 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-indigo-900/20 via-slate-950 to-slate-950 pointer-events-none"></div>

                    {/* Compact Header */}
                    <div className={`flex-none ${headerClass} px-3 flex items-center justify-between bg-slate-900/80 backdrop-blur-md border-b border-slate-800 z-30`}>
                        <div className="flex items-center gap-2">
                            <a 
                                href="https://text2.pro" 
                                target="_blank" 
                                rel="noopener noreferrer"
                                className={`${isUltraCompact ? 'w-6 h-6' : 'w-7 h-7'} rounded-lg bg-white flex items-center justify-center shadow-lg hover:scale-105 transition-transform`}
                            >
                                <img 
                                    src="https://text2.pro/favicon.ico" 
                                    alt="Text2.pro" 
                                    className="w-full h-full rounded-lg"
                                />
                            </a>
                            <span className={`font-bold ${isUltraCompact ? 'text-sm' : 'text-base'} bg-clip-text text-transparent bg-gradient-to-r from-white to-slate-400`}>Text2 Chess gamme</span>
                        </div>
                        <button onClick={() => setShowModal(true)} className={`${isUltraCompact ? 'p-1.5' : 'p-2'} rounded-full hover:bg-slate-800 transition-colors`}>
                            <svg xmlns="http://www.w3.org/2000/svg" width={isUltraCompact ? "18" : "20"} height={isUltraCompact ? "18" : "20"} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="text-slate-400"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
                        </button>
                    </div>

                    {/* Main Game Area */}
                    <div className={`flex-1 flex flex-col items-center justify-center ${mainClass} relative z-10 min-h-0`}>
                        
                        {/* Opponent Info - Compact */}
                        <div className={`w-full max-w-[400px] flex items-center justify-between ${playerInfoClass} px-2`}>
                            <div className="flex items-center gap-2">
                                <div className={`${isUltraCompact ? 'w-8 h-8' : 'w-10 h-10'} rounded-xl flex items-center justify-center shadow-lg transition-all border border-slate-700
                                    ${game.turn() === 'b' ? 'bg-slate-800 ring-2 ring-indigo-500/50 scale-105' : 'bg-slate-900 opacity-70'}`}>
                                    <span className={isUltraCompact ? 'text-sm' : 'text-base'}>{gameMode === 'PvAI' ? 'Me' : 'YOU'}</span>
                                </div>
                                <div>
                                    <div className={`${isUltraCompact ? 'text-xs' : 'text-sm'} font-bold text-slate-200`}>{gameMode === 'PvAI' ? 'AI' : 'Opponent'}</div>
                                    <div className={`${isUltraCompact ? 'text-[10px]' : 'text-xs'} font-medium text-slate-500 flex items-center gap-1 h-3`}>
                                        {game.turn() === 'b' && isAiThinking ? (
                                            <span className="flex gap-0.5 items-center text-indigo-400">
                                                <span className="w-1 h-1 bg-indigo-400 rounded-full animate-bounce"></span>
                                                <span className="w-1 h-1 bg-indigo-400 rounded-full animate-bounce delay-75"></span>
                                                <span className="w-1 h-1 bg-indigo-400 rounded-full animate-bounce delay-150"></span>
                                                {!isUltraCompact && 'Thinking'}
                                            </span>
                                        ) : (game.turn() === 'b' ? 'Waiting...' : '')}
                                    </div>
                                </div>
                            </div>
                        </div>

                        {/* Chess Board - Responsive size */}
                        <div className={`w-full max-w-[400px] aspect-square rounded-xl overflow-hidden shadow-2xl ${isUltraCompact ? 'ring-4' : 'ring-6'} ring-slate-800 bg-slate-800`}>
                            <div className="w-full h-full grid grid-cols-8 grid-rows-8">
                                {renderBoard()}
                            </div>
                        </div>

                        {/* Player Info - Compact */}
                        <div className={`w-full max-w-[400px] flex items-center justify-between ${playerInfoClass} px-2`}>
                            <div className="flex items-center gap-2">
                                <div className={`${isUltraCompact ? 'w-8 h-8' : 'w-10 h-10'} rounded-xl flex items-center justify-center shadow-lg transition-all border border-slate-700
                                    ${game.turn() === 'w' ? 'bg-indigo-600 text-white ring-2 ring-indigo-400/50 scale-105 shadow-indigo-500/20' : 'bg-slate-900 opacity-70'}`}>
                                    <span className={isUltraCompact ? 'text-sm' : 'text-base'}>use</span>
                                </div>
                                <div>
                                    <div className={`${isUltraCompact ? 'text-xs' : 'text-sm'} font-bold text-slate-200`}>You</div>
                                    <div className={`${isUltraCompact ? 'text-[10px]' : 'text-xs'} font-medium text-slate-500`}>
                                        {game.turn() === 'w' ? <span className="text-indigo-400">Your turn</span> : 'Waiting...'}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* Bottom Controls - Compact */}
                    <div className={`flex-none ${controlsClass} bg-slate-900/50 backdrop-blur-md border-t border-slate-800 z-30`}>
                        <div className="max-w-[400px] mx-auto grid grid-cols-2 gap-3">
                            <button 
                                onClick={() => { game.undo(); if(gameMode === 'PvAI') game.undo(); setFen(game.fen()); setLastMoveSquares([]); }}
                                disabled={game.history().length === 0}
                                className={`flex items-center justify-center gap-2 ${isUltraCompact ? 'py-2.5' : 'py-3'} rounded-xl bg-slate-800 hover:bg-slate-700 text-slate-300 font-semibold transition-all disabled:opacity-50 active:scale-95`}
                            >
                                <svg xmlns="http://www.w3.org/2000/svg" width={isUltraCompact ? "14" : "16"} height={isUltraCompact ? "14" : "16"} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"><path d="M3 7v6h6"/><path d="M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"/></svg>
                                <span className={isUltraCompact ? 'text-sm' : 'text-base'}>Undo</span>
                            </button>
                            <button 
                                onClick={() => setShowModal(true)}
                                className={`flex items-center justify-center gap-2 ${isUltraCompact ? 'py-2.5' : 'py-3'} rounded-xl bg-white text-slate-900 hover:bg-slate-100 font-bold shadow-lg shadow-white/10 transition-all active:scale-95`}
                            >
                                <svg xmlns="http://www.w3.org/2000/svg" width={isUltraCompact ? "14" : "16"} height={isUltraCompact ? "14" : "16"} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>
                                <span className={isUltraCompact ? 'text-sm' : 'text-base'}>Menu</span>
                            </button>
                        </div>
                    </div>

                    {/* Modal Menu - Responsive */}
                    {showModal && (
                        <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-md animate-[fadeIn_0.2s_ease-out]">
                            <div className={`bg-slate-900 w-full max-w-sm rounded-2xl ${isUltraCompact ? 'p-4' : 'p-5'} shadow-2xl border border-slate-700`}>
                                <h3 className={`${isUltraCompact ? 'text-lg' : 'text-xl'} font-bold text-white ${isUltraCompact ? 'mb-4' : 'mb-5'}`}>Settings</h3>
                                <div className={`space-y-${isUltraCompact ? '4' : '5'}`}>
                                    <div className="space-y-2">
                                        <label className="text-xs font-bold text-slate-500 uppercase">Game Mode</label>
                                        <div className="flex gap-2">
                                            {['PvAI', 'PvP'].map(m => (
                                                <button key={m} onClick={() => setGameMode(m)} className={`flex-1 ${isUltraCompact ? 'py-2' : 'py-2.5'} rounded-xl font-bold text-sm transition-all ${gameMode === m ? 'bg-indigo-600 text-white' : 'bg-slate-800 text-slate-400'}`}>
                                                    {m === 'PvAI' ? 'vs Text2' : '2 Players'}
                                                </button>
                                            ))}
                                        </div>
                                    </div>
                                    {gameMode === 'PvAI' && (
                                        <div className="space-y-2">
                                            <label className="text-xs font-bold text-slate-500 uppercase">AI Difficulty</label>
                                            <div className="flex bg-slate-800 p-1 rounded-xl">
                                                {['Easy', 'Medium', 'Hard'].map(d => (
                                                    <button key={d} onClick={() => setDifficulty(d)} className={`flex-1 ${isUltraCompact ? 'py-1.5' : 'py-2'} rounded-lg text-sm font-semibold transition-all ${difficulty === d ? 'bg-slate-700 text-white shadow' : 'text-slate-500'}`}>{d}</button>
                                                ))}
                                            </div>
                                        </div>
                                    )}
                                    <button onClick={() => { setGame(new Chess()); setFen('start'); setLastMoveSquares([]); setShowModal(false); }} className={`w-full ${isUltraCompact ? 'py-2.5' : 'py-3'} bg-red-500/10 hover:bg-red-500/20 text-red-500 font-bold rounded-xl border border-red-500/30`}>
                                        New Game
                                    </button>
                                </div>
                                <button onClick={() => setShowModal(false)} className={`mt-${isUltraCompact ? '4' : '5'} w-full ${isUltraCompact ? 'py-2.5' : 'py-3'} bg-slate-800 text-white font-bold rounded-xl`}>Close</button>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>