<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    
    <!-- SEO Meta Tags - Giữ nguyên, rất chuẩn rồi -->
    <title>Text2 Countday</title>
    <meta name="description" content="Text2 Countday - Free event countdown app, track important dates, birthdays, anniversaries. Beautiful interface, easy to use on Text2.pro" />
    <meta name="keywords" content="text2 countday, countdown, events, birthday, anniversary, text2.pro, free app, time tracking, event manager" />
    <meta name="author" content="Text2.pro" />
    <meta name="robots" content="index, follow" />
    <meta name="language" content="English" />
    
    <!-- Icons -->
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="manifest" href="site.webmanifest">

  <!-- Google tag (gtag.js) - GA4 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-ABCDEFG123"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
  
    gtag('config', 'G-6J85STMJ14');
  </script>

    <!-- Open Graph & Twitter Cards - Chuẩn -->
    <meta property="og:title" content="Text2 Countday - Free Event Countdown App" />
    <meta property="og:description" content="Track and countdown to important events with Text2 Countday. Beautiful interface, easy to use, completely free." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://text2.pro/app/countday/" />
    <meta property="og:site_name" content="Text2.pro" />
    <meta property="og:locale" content="en_US" />
    <meta name="google" content="notranslate"> 
    
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Text2 Countday - Event Countdown App" />
    <meta name="twitter:description" content="Track and countdown to important events with Text2 Countday" />
    <meta name="twitter:url" content="https://text2.pro/app/countday/" />
    
    <link rel="canonical" href="https://text2.pro/app/countday/" />
    
    <!-- Preconnect -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdn.tailwindcss.com">
    
    <!-- Schema.org JSON-LD -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Text2 Countday",
      "description": "Free event countdown app, track important dates, birthdays, anniversaries",
      "url": "https://text2.pro/app/countday/",
      "applicationCategory": "Productivity",
      "operatingSystem": "Web Browser",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "publisher": {
        "@type": "Organization",
        "name": "Text2.pro",
        "url": "https://text2.pro/"
      }
    }
    </script>

    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;700;900&display=swap');
      
      body {
        font-family: 'Inter', sans-serif;
        background-color: #121212;
      }
      
      .scrollbar-hide::-webkit-scrollbar { display: none; }
      .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }

      @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
      .animate-in { animation: fadeIn 0.2s ease-out forwards; }

      .bg-main { background: linear-gradient(135deg, #1E1E1E 0%, #242424 100%); }
      .bg-panel { background: linear-gradient(135deg, #1E1E1E 0%, #242424 100%); }
      .border-custom { border-color: rgba(255, 255, 255, 0.08); }
    </style>

    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  </head>
  <body>
    <!-- 
      SEO TRICK: Nội dung tĩnh bên trong root.
      Khi Google Bot crawl, nó sẽ thấy đoạn text này ngay lập tức.
      Khi React load xong, nó sẽ replace toàn bộ nội dung trong div này bằng App.
    -->
    <div id="root">
      <div style="padding: 20px; color: #fff; text-align: center; font-family: sans-serif;">
        <h1 style="font-size: 24px; font-weight: bold;">Text2 Countday - Event Countdown App</h1>
        <p>The best free app to track your important events, birthdays, and anniversaries.</p>
        <p>Loading application...</p>
        <nav>
          <a href="https://text2.pro" style="color: #ccc;">Home</a>
          <a href="https://text2.pro/app/" style="color: #ccc;">Apps</a>
        </nav>
      </div>
    </div>

    <!-- 
      SEO TRICK: Thẻ noscript dành cho trình duyệt tắt JS hoặc bot đời cũ 
    -->
    <noscript>
      <div style="padding: 20px; color: white; background: #121212;">
        <h1>Text2 Countday</h1>
        <p>Text2 Countday is a free, beautiful event countdown application.</p>
        <p>Please enable JavaScript to use this application.</p>
        <a href="https://text2.pro">Visit Text2.pro</a>
      </div>
    </noscript>

    <script type="text/babel">
      const { useState, useEffect, useMemo } = React;

      // --- ICONS ---
      const Plus = ({ size = 24, className = "", strokeWidth = 2 }) => (
        <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth={strokeWidth} strokeLinecap="round" strokeLinejoin="round" className={className}><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
      );

      const X = ({ size = 24, className = "" }) => (
        <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
      );

      const Trash2 = ({ size = 24, className = "" }) => (
        <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>
      );

      const Calendar = ({ size = 24, className = "" }) => (
        <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
      );

      // --- CONSTANTS ---
      const THEMES = {
        blue: 'from-blue-500 to-cyan-400',
        purple: 'from-violet-500 to-fuchsia-400',
        orange: 'from-orange-500 to-amber-400',
        green: 'from-emerald-500 to-teal-400',
        pink: 'from-rose-500 to-pink-400',
      };

      const THEME_SHADOWS = {
        blue: 'shadow-blue-500/40',
        purple: 'shadow-violet-500/40',
        orange: 'shadow-orange-500/40',
        green: 'shadow-emerald-500/40',
        pink: 'shadow-rose-500/40',
      };

      // --- COMPONENTS ---
      const AddEventModal = ({ isOpen, onClose, onAdd }) => {
        const [title, setTitle] = useState('');
        const [date, setDate] = useState('');
        const [theme, setTheme] = useState('blue');

        if (!isOpen) return null;

        const handleSubmit = (e) => {
          e.preventDefault();
          if (!title || !date) return;
          onAdd(title, date, theme);
          setTitle('');
          setDate('');
          setTheme('blue');
          onClose();
        };

        return (
          <div className="fixed inset-0 z-50 flex items-center justify-center p-4">
            <div className="absolute inset-0 bg-black/80 backdrop-blur-sm" onClick={onClose} />
            <div className="bg-gray-900 border border-white/10 w-full max-w-md rounded-3xl p-6 relative z-10 shadow-2xl animate-in">
              <div className="flex justify-between items-center mb-6">
                  <h2 className="text-2xl font-bold text-white">New Event</h2>
                  <button onClick={onClose} className="text-gray-400 hover:text-white bg-white/5 hover:bg-white/10 p-2 rounded-full transition-all">
                      <X size={20} />
                  </button>
              </div>

              <form onSubmit={handleSubmit} className="space-y-6">
                <div className="space-y-2">
                  <label className="text-sm text-gray-400 font-medium ml-1">Event Name</label>
                  <input
                    type="text"
                    value={title}
                    onChange={(e) => setTitle(e.target.value)}
                    placeholder="e.g. Birthday, Anniversary..."
                    className="w-full bg-black/20 border border-white/10 rounded-2xl px-4 py-3 text-white placeholder-gray-600 focus:outline-none focus:border-blue-500/50 focus:ring-1 focus:ring-blue-500/50 transition-all"
                    required
                  />
                </div>

                <div className="space-y-2">
                  <label className="text-sm text-gray-400 font-medium ml-1">Event Date</label>
                  <input
                    type="date"
                    value={date}
                    onChange={(e) => setDate(e.target.value)}
                    className="w-full bg-black/20 border border-white/10 rounded-2xl px-4 py-3 text-white focus:outline-none focus:border-blue-500/50 focus:ring-1 focus:ring-blue-500/50 transition-all [color-scheme:dark]"
                    required
                  />
                </div>

                <div className="space-y-2">
                  <label className="text-sm text-gray-400 font-medium ml-1">Color Theme</label>
                  <div className="flex gap-3 justify-between">
                    {Object.keys(THEMES).map((c) => (
                      <button
                        key={c}
                        type="button"
                        onClick={() => setTheme(c)}
                        className={`w-10 h-10 rounded-full bg-gradient-to-br ${THEMES[c]} transition-transform ${
                          theme === c ? 'scale-125 ring-2 ring-white ring-offset-2 ring-offset-gray-900' : 'hover:scale-110 opacity-70 hover:opacity-100'
                        }`}
                      />
                    ))}
                  </div>
                </div>

                <button
                  type="submit"
                  className="w-full bg-white text-black font-bold text-lg py-4 rounded-2xl hover:bg-gray-200 transition-colors mt-4 shadow-lg shadow-white/10"
                >
                  Create Event
                </button>
              </form>
            </div>
          </div>
        );
      };

      const EventCard = ({ event, onDelete }) => {
        const { diff, label, isPast, isToday } = useMemo(() => {
          const now = new Date();
          const target = new Date(event.date);
          const nowReset = new Date(now.getFullYear(), now.getMonth(), now.getDate());
          const targetReset = new Date(target.getFullYear(), target.getMonth(), target.getDate());
          const diffTime = targetReset.getTime() - nowReset.getTime();
          const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
          
          if (diffDays === 0) return { diff: 0, label: 'Today', isPast: false, isToday: true };
          const isPast = diffDays < 0;
          return { diff: Math.abs(diffDays), label: isPast ? 'days ago' : 'days left', isPast, isToday: false };
        }, [event.date]);

        const formattedDate = new Date(event.date).toLocaleDateString('en-US', {
          weekday: 'short', year: 'numeric', month: 'short', day: 'numeric'
        });

        return (
          <div className={`relative group overflow-hidden rounded-3xl bg-gray-900 border border-white/10 p-6 transition-all duration-300 hover:scale-[1.02] ${THEME_SHADOWS[event.theme]} hover:shadow-xl shadow-lg`}>
            <div className={`absolute top-0 right-0 -mr-16 -mt-16 w-48 h-48 rounded-full blur-3xl opacity-20 bg-gradient-to-br ${THEMES[event.theme]}`}></div>
            <div className={`absolute bottom-0 left-0 -ml-16 -mb-16 w-48 h-48 rounded-full blur-3xl opacity-10 bg-gradient-to-tr ${THEMES[event.theme]}`}></div>

            <div className="relative z-10 flex justify-between items-start mb-4">
              <div>
                <h3 className="text-xl font-bold text-white tracking-wide">{event.title}</h3>
                <div className="flex items-center text-gray-400 text-xs mt-1 uppercase tracking-wider font-medium">
                  <Calendar className="w-3 h-3 mr-1" />
                  {formattedDate}
                </div>
              </div>
              <button 
                  onClick={(e) => { e.stopPropagation(); onDelete(event.id); }}
                  className="text-gray-500 hover:text-red-400 transition-colors p-2 -mr-2 -mt-2 opacity-0 group-hover:opacity-100"
              >
                  <Trash2 size={18} />
              </button>
            </div>

            <div className="relative z-10 flex items-baseline mt-2">
              {isToday ? (
                  <span className={`text-4xl font-black bg-clip-text text-transparent bg-gradient-to-r ${THEMES[event.theme]}`}>
                      HAPPENING NOW
                  </span>
              ) : (
                  <>
                      <span className={`text-6xl font-black bg-clip-text text-transparent bg-gradient-to-br ${THEMES[event.theme]}`}>
                      {isPast ? '+' : ''}{diff}
                      </span>
                      <span className="ml-2 text-lg font-medium text-gray-400">{label}</span>
                  </>
              )}
            </div>
          </div>
        );
      };

      const App = () => {
        const [events, setEvents] = useState(() => {
          const saved = localStorage.getItem('moments_events');
          return saved ? JSON.parse(saved) : [];
        });
        const [isModalOpen, setIsModalOpen] = useState(false);

        useEffect(() => {
          localStorage.setItem('moments_events', JSON.stringify(events));
        }, [events]);

        const handleAddEvent = (title, date, theme) => {
          const newEvent = { id: crypto.randomUUID(), title, date, theme };
          setEvents(prev => [...prev, newEvent].sort((a, b) => new Date(a.date).getTime() - new Date(b.date).getTime()));
        };

        const handleDeleteEvent = (id) => {
          if(confirm('Are you sure you want to delete this event?')) {
             setEvents(prev => prev.filter(e => e.id !== id));
          }
        };

        return (
          <div className="min-h-screen bg-black text-white font-sans selection:bg-white/20">
            <div className="max-w-md mx-auto min-h-screen flex flex-col relative bg-gray-950 shadow-2xl">
              <header className="p-8 pb-4">
                <div className="flex items-center gap-3 mb-1">
                  <a href="https://text2.pro" target="_blank" rel="noopener noreferrer" className="flex-shrink-0">
                    <img src="https://text2.pro/favicon.ico" alt="Text2.pro Logo" className="w-8 h-8 rounded-lg hover:scale-110 transition-transform duration-200"/>
                  </a>
                  <h1 className="text-2xl font-black tracking-tight bg-gradient-to-r from-white to-gray-500 bg-clip-text text-transparent">Text2 - Countday</h1>
                </div>
              </header>

              <main className="flex-1 p-6 space-y-6 pb-32 overflow-y-auto scrollbar-hide">
                {events.length === 0 ? (
                  <div className="flex flex-col items-center justify-center h-[50vh] text-center opacity-50 space-y-4">
                    <div className="w-24 h-24 rounded-full bg-gradient-to-tr from-gray-800 to-gray-900 flex items-center justify-center animate-pulse">
                      <Plus size={40} className="text-gray-700" />
                    </div>
                    <p className="text-gray-500 font-medium">No events yet.<br/>Tap the + button to get started.</p>
                  </div>
                ) : (
                  events.map(event => (
                    <EventCard key={event.id} event={event} onDelete={handleDeleteEvent} />
                  ))
                )}
              </main>

              <div className="fixed bottom-8 left-1/2 -translate-x-1/2 z-40">
                  <button
                      onClick={() => setIsModalOpen(true)}
                      className="group relative flex items-center justify-center w-16 h-16 rounded-full bg-white text-black shadow-lg hover:shadow-white/25 transition-all hover:scale-110 active:scale-95"
                  >
                      <span className="absolute inset-0 rounded-full bg-white opacity-20 group-hover:animate-ping"></span>
                      <Plus size={32} strokeWidth={2.5} />
                  </button>
              </div>
              
              <div className="fixed bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-black via-black/80 to-transparent pointer-events-none z-30 max-w-md mx-auto" />
            </div>

            <AddEventModal isOpen={isModalOpen} onClose={() => setIsModalOpen(false)} onAdd={handleAddEvent} />
          </div>
        );
      };

      const root = ReactDOM.createRoot(document.getElementById('root'));
      root.render(<App />);
    </script>
  </body>
</html>